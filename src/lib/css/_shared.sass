@use 'sass:color'
@use 'src/lib/css/_space' as space
@use 'src/lib/css/_easing_functions' as easing
@use 'src/lib/css/_fonts' as font
@use 'src/lib/css/_colors' as *

=globals
    :global
        html
            width:  100%
            height: 100%
            margin: 0

        body
            position:                relative
            margin:                  0
            padding:                 0
            background-color:        $background-darker
            font-family:             font.$sans-serif
            font-size:               16px
            line-height:             1.25
            color:                   $off-white
            -webkit-font-smoothing:  antialiased
            -moz-osx-font-smoothing: grayscale
            overflow:                hidden
        
        h1
            font-size: 1.8em
        h2
            font-size: 1.6em
        h3
            font-size: 1.4em
        h4
            font-size: 1.2em
        h5
            font-size: 1.1em
        h6
            font-size: 1em
        
        h1, h2, h3, h4, h5, h6
            margin: 0 0 24px

            &:last-child
                margin-bottom: 0

        p, ul, ol, pre
            margin:      0 0 32px
            line-height: space.$paragraph-line-height

            &:last-child
                margin-bottom: 0

            a
                &:hover
                    text-decoration: underline
        
        ul, ol
            padding-left: 40px

            &:first-child
                li
                    margin-top: 0

            li
                margin:       12px 0
                padding-left: 8px
            
                &:last-of-type
                    margin-bottom: 0
                
                p:last-of-type
                    margin-bottom: 0

            ul, ol
                margin-top:   12px
                padding-left: 24px
                
                &:last-child
                    margin-bottom: 0

        a
            color:           $blue
            text-decoration: none

        button
            background-color: transparent
            border:           none
            font-family:      inherit
            font-size:        inherit
            color:            inherit

        input, textarea, button, div
            &:focus
                outline: none

        blockquote
            position:         relative
            margin:           0 0 32px
            padding:          28px (1.5 * space.$default-padding) 28px space.$default-padding
            border-radius:    6px
            background-color: $background
            font-size:        15px
            color:            color.adjust($off-white, $alpha: -0.1)

            &:after
                content:     '‚Äù'
                position:    absolute
                bottom:      -1px
                right:       16px
                font-family: 'Times New Roman', serif
                font-size:   42px
                font-weight: 600
                line-height: 1
                color:       $background-lighter

            &:last-child
                margin-bottom: 0

            blockquote
                background-color: $background-darker
        
        table
            margin:         0 0 32px
            font-size:      14px
            line-height:    1.5
            border-spacing: 1.5px

            td, th
                padding:          12px
                border-radius:    3px
                background-color: black(0.1)
            
            th
                background-color: black(0.2)
        
        hr
            margin:     32px 0
            border:     none
            border-top: 1px dotted white(0.25)

            &:last-child
                margin-bottom: 0

=scrollbar
    &::-webkit-scrollbar
        width:            8px
        height:           8px
        background-color: transparent
    
    &::-webkit-scrollbar-thumb
        background-color: $background-lighter
        border-radius:    99px

        &:hover
            background-color: color.adjust($background-lighter, $lightness: 2%)
        
        &:active
            background-color: color.adjust($background-lighter, $lightness: 4%)
    
    &::-webkit-scrollbar-corner
        display: none

=code_block_styles
    :global
        pre
            position:    relative
            margin:      32px 0
            text-wrap:   wrap
            font-size:   14px
            line-height: 2

            code
                display:          block
                margin:           0
                padding:          18px 24px
                border-radius:    8px
                border:           1px solid black(0.1)
                background-color: $background-darker
                +scrollbar
                &::-webkit-scrollbar-thumb
                    background-color: $blue-grey
        
            code.hljs
                margin:           0
                padding:          18px 24px
                border-radius:    8px
                border:           1px solid black(0.1)
                background-color: $background-darker
                +scrollbar
                &::-webkit-scrollbar-thumb
                    background-color: $blue-grey
            
            .copy-code
                position:    absolute
                bottom:      0
                right:       0
                font-family: font.$sans-serif
            
            .copy-code-button
                display:          inline-block
                padding:          12px 24px
                border-radius:    8px 0 8px 0
                border:           1px solid $background-darker
                background-color: $background-lighter
                font-weight:      500
                cursor:           pointer

                &:hover
                    background-color: color.adjust($background-lighter, $lightness: -1%)
                
                &:active
                    background-color: color.adjust($background-lighter, $lightness: -2%)
        
        code
            margin:           0 1px
            padding:          3px 6px
            border-radius:    5px
            background-color: $background-darker
            font-size:        14px
            color:            $pale-blue

=fork-hover-info
    display:          flex
    gap:              space.$default-padding
    position:         absolute
    top:              100%
    left:             50%
    z-index:          100
    transform:        translate(-50%, 20px)
    box-sizing:       border-box
    padding:          space.$default-padding
    border-radius:    8px
    box-shadow:       2px 2px 1.5px 0 color.adjust($background-darker, $alpha: -0.2)
    border:           1px solid $background-darker
    background-color: $background-lighter
    font-size:        14px
    font-weight:      500
    line-height:      font.$line-height-14px
    color:            $off-white
    text-align:       left
    opacity:          0
    pointer-events:   none
    transition:       opacity easing.$quart-out 100ms

    &.above
        top:       auto
        bottom:    100%
        transform: translate(-50%, -20px)
    
    .avatar-container
        display:         flex
        flex-direction:  column
        align-items:     center
        justify-content: center
        gap:             16px
        margin:          -3px -1px

        .avatar,
        .model-icon
            height:        28px
            border-radius: 8px

        .down-arrow
            font-size: 16px
    
    .next-message-preview
        display:     flex
        align-items: center
        width:       320px
